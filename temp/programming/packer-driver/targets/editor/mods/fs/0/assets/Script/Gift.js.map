{"version":3,"sources":["file:///Users/backup/SnowyDay/SnowyDay/assets/Script/Gift.ts"],"names":["_decorator","Component","Node","BoxCollider2D","Contact2DType","sp","ccclass","property","Gift","onLoad","node","getComponent","on","BEGIN_CONTACT","onBeginContact","contact","selfCollider","otherCollider","anim","active","Skeleton","setAnimation","scheduleOnce","player","emit","reset"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,a,OAAAA,a;AAAiCC,MAAAA,E,OAAAA,E;;;;;;;OAChF;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;sBAEjBQ,I,WADZF,OAAO,CAAC,MAAD,C,UAEHC,QAAQ,CAACL,IAAD,C,UAERK,QAAQ,CAACL,IAAD,C,oCAJb,MACaM,IADb,SAC0BP,SAD1B,CACoC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAOhCQ,QAAAA,MAAM,GAAG;AACL,eAAKC,IAAL,CAAUC,YAAV,CAAuBR,aAAvB,EAAsCS,EAAtC,CAAyCR,aAAa,CAACS,aAAvD,EAAsE,KAAKC,cAA3E,EAA2F,IAA3F;AACH;;AAEDA,QAAAA,cAAc,CAACC,OAAD,EAAUC,YAAV,EAAwBC,aAAxB,EAAuC;AACjD,cAAID,YAAY,CAACN,IAAb,CAAkBC,YAAlB,CAA+B,QAA/B,CAAJ,EAA8C;AAC1C,gBAAI,KAAKO,IAAL,CAAUC,MAAd,EAAsB;AAClB,mBAAKD,IAAL,CAAUP,YAAV,CAAuBN,EAAE,CAACe,QAA1B,EAAoCC,YAApC,CAAiD,CAAjD,EAAoD,MAApD,EAA4D,KAA5D;AACA,mBAAKC,YAAL,CAAkB,MAAM;AACpB,qBAAKJ,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA,qBAAKI,MAAL,CAAYC,IAAZ,CAAiB,WAAjB;AACH,eAHD,EAGG,CAHH;AAIH;AACJ;AACJ;;AACDC,QAAAA,KAAK,GAAG;AACJ,eAAKP,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH;;AAxB+B,O","sourcesContent":["\nimport { _decorator, Component, Node, BoxCollider2D, Contact2DType, ParticleSystem2D, sp, Event } from 'cc';\nconst { ccclass, property } = _decorator;\n@ccclass('Gift')\nexport class Gift extends Component {\n    @property(Node)\n    anim: Node;\n    @property(Node)\n    player: Node;\n    sentGiftEvent: any;\n\n    onLoad() {\n        this.node.getComponent(BoxCollider2D).on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n    }\n\n    onBeginContact(contact, selfCollider, otherCollider) {\n        if (selfCollider.node.getComponent('Bullet')) {\n            if (this.anim.active) {\n                this.anim.getComponent(sp.Skeleton).setAnimation(0, 'Open', false);\n                this.scheduleOnce(() => {\n                    this.anim.active = false;\n                    this.player.emit('SENT_GIFT')\n                }, 1)\n            }\n        }\n    }\n    reset() {\n        this.anim.active = true;\n    }\n}\n\n"]}