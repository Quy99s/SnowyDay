{"version":3,"sources":["file:///Users/backup/SnowyDay/SnowyDay/assets/Script/Enemy.ts"],"names":["_decorator","Component","Node","Contact2DType","ParticleSystem2D","BoxCollider2D","ccclass","property","Enemy","onLoad","node","getComponent","on","BEGIN_CONTACT","onBeginContact","contact","selfCollider","otherCollider","backGround","active","particle","resetSystem","scheduleOnce","stopSystem","reset"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAwBC,MAAAA,a,OAAAA,a;AAAkCC,MAAAA,gB,OAAAA,gB;AAAkBC,MAAAA,a,OAAAA,a;;;;;;;AACpGC,MAAAA,O,GAAsBN,U,CAAtBM,O;AAASC,MAAAA,Q,GAAaP,U,CAAbO,Q;;uBAGJC,K,WADZF,OAAO,CAAC,OAAD,C,UAEHC,QAAQ,CAACL,IAAD,C,UAERK,QAAQ,CAACL,IAAD,C;;;;;;;;;;;;;;;;;;;;;eAKTO,M,GAAA,kBAAS;AACL,eAAKC,IAAL,CAAUC,YAAV,CAAuBN,aAAvB,EAAsCO,EAAtC,CAAyCT,aAAa,CAACU,aAAvD,EAAsE,KAAKC,cAA3E,EAA2F,IAA3F;AACH,S;;eACDA,c,GAAA,wBAAeC,OAAf,EAAwBC,YAAxB,EAAsCC,aAAtC,EAAqD;AAAA;;AACjD,cAAID,YAAY,CAACN,IAAb,CAAkBC,YAAlB,CAA+B,QAA/B,KAA4CK,YAAY,CAACN,IAAb,CAAkBC,YAAlB,CAA+B,OAA/B,CAAhD,EAAyF;AACrF,gBAAI,KAAKO,UAAL,CAAgBC,MAApB,EAA4B;AACxB,mBAAKD,UAAL,CAAgBC,MAAhB,GAAyB,KAAzB;;AACA,kBAAI,KAAKC,QAAT,EAAmB;AACf,qBAAKA,QAAL,CAAcD,MAAd,GAAuB,IAAvB;AACA,qBAAKC,QAAL,CAAcT,YAAd,CAA2BP,gBAA3B,EAA6CiB,WAA7C;AACA,qBAAKC,YAAL,CAAkB,YAAM;AACpB,kBAAA,MAAI,CAACF,QAAL,CAAcT,YAAd,CAA2BP,gBAA3B,EAA6CiB,WAA7C;;AACA,kBAAA,MAAI,CAACD,QAAL,CAAcT,YAAd,CAA2BP,gBAA3B,EAA6CmB,UAA7C;;AACA,kBAAA,MAAI,CAACH,QAAL,CAAcD,MAAd,GAAuB,KAAvB;AACH,iBAJD,EAIG,GAJH;AAKH;AAEJ;AACJ;AACJ,S;;eACDK,K,GAAA,iBAAQ;AACJ,eAAKN,UAAL,CAAgBC,MAAhB,GAAyB,IAAzB;AACH,S;;;QA9BsBlB,S","sourcesContent":["\nimport { _decorator, Component, Node, CircleCollider2D, Contact2DType, PolygonCollider2D, ParticleSystem2D, BoxCollider2D, RigidBody2D, Vec2 } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Enemy')\nexport class Enemy extends Component {\n    @property(Node)\n    backGround: Node;\n    @property(Node)\n    particle: Node;\n    \n\n\n    onLoad() {\n        this.node.getComponent(BoxCollider2D).on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n    }\n    onBeginContact(contact, selfCollider, otherCollider) {\n        if (selfCollider.node.getComponent('Bullet') || selfCollider.node.getComponent('Skill')) {\n            if (this.backGround.active) {\n                this.backGround.active = false;\n                if (this.particle) {\n                    this.particle.active = true;\n                    this.particle.getComponent(ParticleSystem2D).resetSystem();\n                    this.scheduleOnce(() => {\n                        this.particle.getComponent(ParticleSystem2D).resetSystem();\n                        this.particle.getComponent(ParticleSystem2D).stopSystem();\n                        this.particle.active = false;\n                    }, 0.3)\n                }\n\n            }\n        }\n    }\n    reset() {\n        this.backGround.active = true;\n    }\n}\n\n"]}