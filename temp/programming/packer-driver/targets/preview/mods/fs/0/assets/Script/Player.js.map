{"version":3,"sources":["file:///Users/backup/SnowyDay/SnowyDay/assets/Script/Player.ts"],"names":["_decorator","Component","Node","tween","v3","ParticleSystem2D","RigidBody2D","Vec2","ccclass","property","Player","onLoad","node","on","fireToPosition","rigidBody","getComponent","position","fireBullet","linearVelocity","applyForceToCenter","callBack","bullet","setPosition","getPosition","resetSystem","active","tweenMove","stop","to","easing","delay","call","reset","start","stopSystem"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,E,OAAAA,E;AAAUC,MAAAA,gB,OAAAA,gB;AAAkBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;;;;;;AAC9EC,MAAAA,O,GAAsBR,U,CAAtBQ,O;AAASC,MAAAA,Q,GAAaT,U,CAAbS,Q;;wBAGJC,M,WADZF,OAAO,CAAC,QAAD,C,UAGHC,QAAQ,CAACP,IAAD,C;;;;;;;;;;;;;;;;;;;;;;;eAKTS,M,GAAA,kBAAS;AACL,eAAKC,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,KAAKC,cAAjC,EAAiD,IAAjD;AACA,eAAKC,SAAL,GAAiB,KAAKH,IAAL,CAAUI,YAAV,CAAuBV,WAAvB,CAAjB;AACH,S;;eAEDQ,c,GAAA,wBAAeG,QAAf,EAAyB;AACrB,eAAKC,UAAL,CAAgBD,QAAhB;AACA,eAAKF,SAAL,CAAeI,cAAf,GAAgC,IAAIZ,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAhC;AACA,eAAKQ,SAAL,CAAeK,kBAAf,CAAkC,IAAIb,IAAJ,CAAS,EAAT,EAAa,GAAb,CAAlC,EAAqD,IAArD,EAHqB,CAIrB;AACH,S;;eAEDW,U,GAAA,oBAAWD,QAAX,EAAqBI,QAArB,EAAsC;AAAA;;AAAA,cAAjBA,QAAiB;AAAjBA,YAAAA,QAAiB,GAAN,IAAM;AAAA;;AAClC,eAAKC,MAAL,CAAYC,WAAZ,CAAwB,KAAKX,IAAL,CAAUY,WAAV,EAAxB;AACA,eAAKF,MAAL,CAAYN,YAAZ,CAAyBX,gBAAzB,EAA2CoB,WAA3C;AACA,eAAKH,MAAL,CAAYI,MAAZ,GAAqB,IAArB;AACA,eAAKC,SAAL,IAAkB,KAAKA,SAAL,CAAeC,IAAf,EAAlB;AACA,eAAKD,SAAL,GAAiBxB,KAAK,CAAC,KAAKmB,MAAN,CAAL,CACZO,EADY,CACT,GADS,EACJ;AAAEZ,YAAAA,QAAQ,EAAEb,EAAE,CAACa,QAAD;AAAd,WADI,EACwB;AAAEa,YAAAA,MAAM,EAAE;AAAV,WADxB,EAEZC,KAFY,CAEN,GAFM,EAGZC,IAHY,CAGP,YAAM;AACRX,YAAAA,QAAQ,IAAIA,QAAQ,EAApB;;AACA,YAAA,MAAI,CAACY,KAAL;;AACA,YAAA,MAAI,CAACN,SAAL,GAAiB,IAAjB;AACH,WAPY,EAQZO,KARY,EAAjB;AASH,S;;eACDD,K,GAAA,iBAAQ;AACJ,eAAKX,MAAL,CAAYN,YAAZ,CAAyBX,gBAAzB,EAA2CoB,WAA3C;AACA,eAAKH,MAAL,CAAYN,YAAZ,CAAyBX,gBAAzB,EAA2C8B,UAA3C;AACH,S;;;QArCuBlC,S","sourcesContent":["\nimport { _decorator, Component, Node, tween, v3, Vec3, ParticleSystem2D, RigidBody2D, Vec2 } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Player')\nexport class Player extends Component {\n\n    @property(Node)\n    bullet: Node;\n\n    tweenMove: any;\n    rigidBody: RigidBody2D;\n    onLoad() {\n        this.node.on(\"FIRE_TO_POS\", this.fireToPosition, this);\n        this.rigidBody = this.node.getComponent(RigidBody2D);\n    }\n\n    fireToPosition(position) {\n        this.fireBullet(position);\n        this.rigidBody.linearVelocity = new Vec2(0, 0);\n        this.rigidBody.applyForceToCenter(new Vec2(20, 600), true);\n        //this.rigidBody.applyForceToCenter(new Vec2(0, 600), true);\n    }\n\n    fireBullet(position, callBack = null) {\n        this.bullet.setPosition(this.node.getPosition());\n        this.bullet.getComponent(ParticleSystem2D).resetSystem();\n        this.bullet.active = true;\n        this.tweenMove && this.tweenMove.stop();\n        this.tweenMove = tween(this.bullet)\n            .to(0.3, { position: v3(position) }, { easing: 'sineInOut' })\n            .delay(0.1)\n            .call(() => {\n                callBack && callBack();\n                this.reset();\n                this.tweenMove = null;\n            })\n            .start();\n    }\n    reset() {\n        this.bullet.getComponent(ParticleSystem2D).resetSystem();\n        this.bullet.getComponent(ParticleSystem2D).stopSystem();\n    }\n}\n"]}